<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 20 Months, My Love ❤️</title>
    <style>
        *,
        *::after,
        *::before {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-color: #000;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 50%, #6c5b7b 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        /* LOADING SCREEN */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 50%, #6c5b7b 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-heart {
            font-size: 100px;
            animation: loadingPulse 1.5s ease-in-out infinite;
        }

        @keyframes loadingPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .loading-text {
            color: white;
            font-size: 1.8em;
            margin-top: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .loading-dots {
            color: white;
            font-size: 2em;
            margin-top: 10px;
        }

        /* COUNTDOWN TIMER */
        .countdown-section {
            background: rgba(255, 255, 255, 0.98);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 1.5s ease-in;
        }

        .countdown-title {
            font-size: 1.8em;
            color: #c06c84;
            margin-bottom: 25px;
        }

        .countdown-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .countdown-item {
            background: linear-gradient(135deg, #fff6f8 0%, #ffe8ee 100%);
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.2);
        }

        .countdown-number {
            font-size: 3em;
            font-weight: bold;
            color: #ff6b9d;
            display: block;
        }

        .countdown-label {
            font-size: 1em;
            color: #6c5b7b;
            margin-top: 5px;
        }

        /* Music Player Styles */
        .music-player {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .music-player:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .play-pause-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .play-pause-btn:hover {
            transform: scale(1.1);
        }

        .music-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .music-title {
            font-size: 0.9em;
            color: #333;
            font-weight: bold;
        }

        .music-status {
            font-size: 0.75em;
            color: #888;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-icon {
            font-size: 18px;
        }

        input[type="range"] {
            width: 80px;
            height: 5px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ff6b9d;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ff6b9d;
            cursor: pointer;
            border: none;
        }

        /* Welcome Overlay for Music */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.5s ease;
        }

        .welcome-box {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .welcome-box h2 {
            font-size: 2em;
            color: #c06c84;
            margin-bottom: 20px;
        }

        .welcome-box p {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 30px;
        }

        .start-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 107, 157, 0.4);
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(255, 107, 157, 0.6);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            padding: 60px 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 1.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .heart {
            font-size: 80px;
            animation: heartbeat 1.5s ease-in-out infinite;
            display: inline-block;
            margin-bottom: 20px;
        }

        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            10%, 30% {
                transform: scale(1.1);
            }
            20%, 40% {
                transform: scale(1.05);
            }
        }

        h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            color: #c06c84;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            font-size: 1.3em;
            color: #6c5b7b;
            font-style: italic;
            margin-bottom: 10px;
        }

        .date {
            font-size: 1.1em;
            color: #888;
            margin-top: 10px;
        }

        /* SCROLL ANIMATIONS */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-reveal-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .scroll-reveal-left.revealed {
            opacity: 1;
            transform: translateX(0);
        }

        .scroll-reveal-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .scroll-reveal-right.revealed {
            opacity: 1;
            transform: translateX(0);
        }

        .content-section {
            background: rgba(255, 255, 255, 0.98);
            padding: 50px 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
        }

        .message {
            font-size: 1.2em;
            line-height: 2;
            margin: 25px 0;
            color: #555;
            text-align: justify;
        }

        .message-center {
            text-align: center;
            font-size: 1.3em;
            color: #c06c84;
            font-weight: bold;
            font-style: italic;
            margin: 40px 0;
            padding: 20px;
            background: linear-gradient(135deg, #fff6f8 0%, #ffe8ee 100%);
            border-radius: 15px;
            border-left: 5px solid #ff6b9d;
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .photo-frame {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            position: relative;
        }

        .photo-frame:hover {
            transform: translateY(-10px) rotate(2deg);
        }

        .photo-frame img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 5px;
        }

        .photo-caption {
            text-align: center;
            margin-top: 10px;
            font-size: 0.95em;
            color: #666;
            font-style: italic;
        }

        .section-title {
            font-size: 2em;
            color: #6c5b7b;
            margin-bottom: 30px;
            text-align: center;
            border-bottom: 3px solid #ff6b9d;
            padding-bottom: 15px;
        }

        .button {
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            color: white;
            padding: 18px 50px;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 10px 25px rgba(255, 107, 157, 0.4);
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(255, 107, 157, 0.6);
        }

        .hidden-message {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #fff6f8 0%, #ffe8ee 100%);
            border-radius: 15px;
            animation: slideDown 0.5s ease;
            border: 2px solid #ff6b9d;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-heart {
            position: absolute;
            font-size: 30px;
            opacity: 0.3;
            animation: float 10s infinite ease-in-out;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .footer {
            text-align: center;
            padding: 40px 20px 20px 20px;
            color: white;
            font-size: 1.1em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .emphasis {
            color: #ff6b9d;
            font-weight: bold;
        }

        /* ========== BLOSSOMING FLOWERS CSS FROM REFERENCE ========== */

        /* Flowers visible but animations paused */

        
        .bouquet-message-final {
            text-align: center;
            color: white;
            font-size: 2em;
            text-shadow: 3px 3px 10px rgba(0, 0, 0, 0.5);
            margin: 60px 0 40px 0;
            font-style: italic;
            font-family: 'Georgia', serif;
        }

        .flowers {
            position: relative;
            transform: scale(0.9);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            min-height: 70vh;
            perspective: 1000px;
            transition: opacity 1s ease-in;
            margin: 0 auto;
            padding-bottom: 100px;
        }

        .flower {
            position: absolute;
            bottom: 10vmin;
            transform-origin: bottom center;
            z-index: 10;
        }

        .flower--1 {
            animation: moving-flower-1 4s linear infinite;
        }

        .flower--1 .flower__line {
            height: 70vmin;
            animation-delay: 0.3s;
        }

        .flower--1 .flower__line__leaf--1 {
            animation: blooming-leaf-right 0.8s 1.6s backwards;
        }

        .flower--1 .flower__line__leaf--2 {
            animation: blooming-leaf-right 0.8s 1.4s backwards;
        }

        .flower--1 .flower__line__leaf--3 {
            animation: blooming-leaf-left 0.8s 1.2s backwards;
        }

        .flower--1 .flower__line__leaf--4 {
            animation: blooming-leaf-left 0.8s 1s backwards;
        }

        .flower--1 .flower__line__leaf--5 {
            animation: blooming-leaf-right 0.8s 1.8s backwards;
        }

        .flower--1 .flower__line__leaf--6 {
            animation: blooming-leaf-left 0.8s 2s backwards;
        }

        .flower--2 {
            left: 50%;
            transform: rotate(20deg);
            animation: moving-flower-2 4s linear infinite;
        }

        .flower--2 .flower__line {
            height: 60vmin;
            animation-delay: 0.6s;
        }

        .flower--2 .flower__line__leaf--1 {
            animation: blooming-leaf-right 0.8s 1.9s backwards;
        }

        .flower--2 .flower__line__leaf--2 {
            animation: blooming-leaf-right 0.8s 1.7s backwards;
        }

        .flower--2 .flower__line__leaf--3 {
            animation: blooming-leaf-left 0.8s 1.5s backwards;
        }

        .flower--2 .flower__line__leaf--4 {
            animation: blooming-leaf-left 0.8s 1.3s backwards;
        }

        .flower--3 {
            left: 50%;
            transform: rotate(-15deg);
            animation: moving-flower-3 4s linear infinite;
        }

        .flower--3 .flower__line {
            animation-delay: 0.9s;
        }

        .flower--3 .flower__line__leaf--1 {
            animation: blooming-leaf-right 0.8s 2.5s backwards;
        }

        .flower--3 .flower__line__leaf--2 {
            animation: blooming-leaf-right 0.8s 2.3s backwards;
        }

        .flower--3 .flower__line__leaf--3 {
            animation: blooming-leaf-left 0.8s 2.1s backwards;
        }

        .flower--3 .flower__line__leaf--4 {
            animation: blooming-leaf-left 0.8s 1.9s backwards;
        }

        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leafs--1 {
            animation-delay: 1.1s;
        }

        .flower__leafs--2 {
            animation-delay: 1.4s;
        }

        .flower__leafs--3 {
            animation-delay: 1.7s;
        }

        .flower__leafs::after {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            transform: translate(-50%, -100%);
            width: 8vmin;
            height: 8vmin;
            background-color: #ff6b9d;
            filter: blur(10vmin);
        }

        .flower__leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 8vmin;
            height: 11vmin;
            border-radius: 51% 49% 47% 53% / 44% 45% 55% 69%;
            background-color: #ffb3d1;
            background-image: linear-gradient(to top, #ff6b9d, #ffb3d1);
            transform-origin: bottom center;
            opacity: 0.9;
            box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5);
        }

        .flower__leaf--1 {
            transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg);
        }

        .flower__leaf--2 {
            transform: translate(-50%, -4%) rotateX(40deg);
        }

        .flower__leaf--3 {
            transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg);
        }

        .flower__leaf--4 {
            width: 8vmin;
            height: 8vmin;
            transform-origin: bottom left;
            border-radius: 4vmin 10vmin 4vmin 4vmin;
            transform: translate(-0%, 18%) rotateX(70deg) rotate(-43deg);
            background-image: linear-gradient(to top, #ff1744, #ffb3d1);
            z-index: 1;
            opacity: 0.8;
        }

        .flower__white-circle {
            position: absolute;
            left: -3.5vmin;
            top: -3vmin;
            width: 9vmin;
            height: 4vmin;
            border-radius: 50%;
            background-color: #ffd700;
        }

        .flower__white-circle::after {
            content: "";
            position: absolute;
            left: 50%;
            top: 45%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            border-radius: inherit;
            background: linear-gradient(90deg, rgb(255, 235, 18), rgb(255, 206, 0));
        }

        .flower__line {
            height: 55vmin;
            width: 1.5vmin;
            background-image: linear-gradient(to left, rgb(0, 0, 0, 0.2), transparent, rgba(255, 255, 255, 0.2)),
                linear-gradient(to top, transparent 10%, #2d8f2d, #4a7c28);
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.5);
            animation: grow-flower-tree 4s backwards;
        }

        .flower__line__leaf {
            --w: 7vmin;
            --h: calc(var(--w) + 2vmin);
            position: absolute;
            top: 20%;
            left: 90%;
            width: var(--w);
            height: var(--h);
            border-top-right-radius: var(--h);
            border-bottom-left-radius: var(--h);
            background-image: linear-gradient(to top, rgba(45, 143, 45, 0.4), #4a7c28);
        }

        .flower__line__leaf--1 {
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--2 {
            top: 45%;
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--3,
        .flower__line__leaf--4,
        .flower__line__leaf--6 {
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            top: 12%;
            transform: rotate(-70deg) rotateY(30deg);
        }

        .flower__line__leaf--4 {
            top: 40%;
        }

        .flower__line__leaf--5 {
            top: 0;
            transform-origin: left;
            transform: rotate(70deg) rotateY(30deg) scale(0.6);
        }

        .flower__line__leaf--6 {
            top: -2%;
            left: -450%;
            transform-origin: right;
            transform: rotate(-70deg) rotateY(30deg) scale(0.6);
        }

        .flower__light {
            position: absolute;
            bottom: 0vmin;
            width: 1vmin;
            height: 1vmin;
            background-color: rgb(255, 251, 0);
            border-radius: 50%;
            filter: blur(0.2vmin);
            animation: light-ans 4s linear infinite backwards;
        }

        .flower__light:nth-child(odd) {
            background-color: #23f0ff;
        }

        .flower__light--1 {
            left: -2vmin;
            animation-delay: 1s;
        }

        .flower__light--2 {
            left: 3vmin;
            animation-delay: 0.5s;
        }

        .flower__light--3 {
            left: -6vmin;
            animation-delay: 0.3s;
        }

        .flower__light--4 {
            left: 6vmin;
            animation-delay: 0.9s;
        }

        .flower__light--5 {
            left: -1vmin;
            animation-delay: 1.5s;
        }

        .flower__light--6 {
            left: -4vmin;
            animation-delay: 3s;
        }

        .flower__light--7 {
            left: 3vmin;
            animation-delay: 2s;
        }

        .flower__light--8 {
            left: -6vmin;
            animation-delay: 3.5s;
        }

        
        
        .grow-ans {
            animation: grow-ans 2s var(--d) backwards;
        }

        @keyframes grow-ans {
            0% {
                transform: scale(0);
                opacity: 0;
            }
        }

        @keyframes light-ans {
            0% {
                opacity: 0;
                transform: translateY(0vmin);
            }
            25% {
                opacity: 1;
                transform: translateY(-5vmin) translateX(-2vmin);
            }
            50% {
                opacity: 1;
                transform: translateY(-15vmin) translateX(2vmin);
                filter: blur(0.2vmin);
            }
            75% {
                transform: translateY(-20vmin) translateX(-2vmin);
                filter: blur(0.2vmin);
            }
            100% {
                transform: translateY(-30vmin);
                opacity: 0;
                filter: blur(1vmin);
            }
        }

        @keyframes moving-flower-1 {
            0%, 100% {
                transform: rotate(2deg);
            }
            50% {
                transform: rotate(-2deg);
            }
        }

        @keyframes moving-flower-2 {
            0%, 100% {
                transform: rotate(18deg);
            }
            50% {
                transform: rotate(14deg);
            }
        }

        @keyframes moving-flower-3 {
            0%, 100% {
                transform: rotate(-18deg);
            }
            50% {
                transform: rotate(-20deg) rotateY(-10deg);
            }
        }

        @keyframes blooming-leaf-right {
            0% {
                transform-origin: left;
                transform: rotate(70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes blooming-leaf-left {
            0% {
                transform-origin: right;
                transform: rotate(-70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes grow-flower-tree {
            0% {
                height: 0;
                border-radius: 1vmin;
            }
        }

        @keyframes blooming-flower {
            0% {
                transform: scale(0);
            }
        }


        .flowers.not-loaded * {
            animation-play-state: paused !important;
        }

        .flowers.not-loaded .flower__leaf,
        .flowers.not-loaded .flower__line,
        .flowers.not-loaded .flower__light,
        .flowers.not-loaded .flower__grass,
        .flowers.not-loaded .grow-ans,
        .flowers.not-loaded .long-g .leaf {
            animation-play-state: paused !important;
        }

        /* ========== PASSWORD GATE ========== */
        .password-gate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a0011 0%, #2d0a1e 30%, #0d0d2b 70%, #1a0011 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999999;
            overflow: hidden;
        }

        .password-gate.hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .password-gate::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 40%, rgba(255, 107, 157, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 70% 60%, rgba(192, 108, 132, 0.06) 0%, transparent 50%);
            animation: gateBgShift 10s ease-in-out infinite;
        }

        @keyframes gateBgShift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(3%, -3%); }
        }

        .password-box {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 107, 157, 0.15);
            padding: 55px 45px;
            border-radius: 28px;
            text-align: center;
            max-width: 420px;
            width: 90%;
            animation: scaleIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5),
                        0 0 60px rgba(255, 107, 157, 0.08),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .password-lock-icon {
            font-size: 55px;
            margin-bottom: 15px;
            display: block;
            filter: drop-shadow(0 0 15px rgba(255, 107, 157, 0.4));
            animation: lockFloat 3s ease-in-out infinite;
        }

        @keyframes lockFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .password-box h2 {
            font-size: 1.6em;
            color: rgba(255, 179, 209, 0.95);
            margin-bottom: 8px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .password-box p {
            font-size: 0.95em;
            color: rgba(255, 179, 209, 0.45);
            margin-bottom: 30px;
            font-style: italic;
        }

        .password-input-wrapper {
            position: relative;
            margin-bottom: 22px;
        }

        .password-input {
            width: 100%;
            padding: 16px 50px 16px 22px;
            border: 1.5px solid rgba(255, 107, 157, 0.2);
            border-radius: 14px;
            font-size: 1.05em;
            font-family: 'Georgia', serif;
            background: rgba(255, 255, 255, 0.04);
            color: #ffb3d1;
            outline: none;
            transition: all 0.4s ease;
            letter-spacing: 2px;
        }

        .password-input::placeholder {
            color: rgba(255, 179, 209, 0.25);
            letter-spacing: 1px;
        }

        .password-input:focus {
            border-color: rgba(255, 107, 157, 0.5);
            box-shadow: 0 0 25px rgba(255, 107, 157, 0.12),
                        inset 0 0 10px rgba(255, 107, 157, 0.05);
        }

        .toggle-password-btn {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            color: rgba(255, 179, 209, 0.4);
            transition: color 0.3s;
            padding: 4px;
        }

        .toggle-password-btn:hover {
            color: rgba(255, 179, 209, 0.7);
        }

        .password-submit-btn {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.8) 0%, rgba(192, 108, 132, 0.8) 100%);
            color: white;
            padding: 15px 45px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            font-family: 'Georgia', serif;
            transition: all 0.4s ease;
            letter-spacing: 1px;
            box-shadow: 0 8px 30px rgba(255, 107, 157, 0.25);
            width: 100%;
        }

        .password-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(255, 107, 157, 0.4);
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.95) 0%, rgba(192, 108, 132, 0.95) 100%);
        }

        .password-error {
            color: #ff4757;
            font-size: 0.9em;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-shadow: 0 0 10px rgba(255, 71, 87, 0.3);
        }

        .password-error.visible {
            opacity: 1;
            animation: errorShake 0.5s ease;
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-8px); }
            40% { transform: translateX(8px); }
            60% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
        }

        /* Floating sparkles for password screen */
        .gate-sparkle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 179, 209, 0.4);
            border-radius: 50%;
            animation: sparkleFloat 6s infinite ease-in-out;
        }

        @keyframes sparkleFloat {
            0%, 100% { opacity: 0; transform: translateY(0) scale(0); }
            30% { opacity: 1; transform: translateY(-30px) scale(1); }
            70% { opacity: 0.5; transform: translateY(-60px) scale(0.5); }
            100% { opacity: 0; transform: translateY(-90px) scale(0); }
        }

        /* ========== PHOTO ALBUM ========== */
        .album-section {
            background: rgba(255, 255, 255, 0.98);
            padding: 50px 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            overflow: hidden;
        }

        .album-upload-area {
            position: fixed;
            bottom: 150px;
            right: 50px;
            background: rgba(255, 255, 255, 0.95);
            padding: 14px 22px;
            border-radius: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Georgia', serif;
        }

        .album-upload-area:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }

        .upload-icon-btn {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .upload-label {
            font-size: 0.85em;
            color: #333;
            font-weight: bold;
            white-space: nowrap;
        }

        /* Responsive upload button */
        @media (max-width: 600px) {
            .album-upload-area {
                bottom: 160px;
                right: 22px;
                padding: 10px;
                border-radius: 50%;
                gap: 0;
            }
            .upload-icon-btn {
                width: 34px;
                height: 34px;
                font-size: 16px;
            }
            .upload-label { display: none; }
        }

        @media (min-width: 601px) and (max-width: 1023px) {
            .album-upload-area {
                bottom: 120px;
                right: 30px;
                padding: 12px 18px;
            }
            .upload-icon-btn {
                width: 36px;
                height: 36px;
            }
        }
        .album-upload-input {
            display: none;
        }

        /* Wrapper for scrolling */
        .album-grid-wrapper {
            margin-top: 20px;
            max-height: 75vh;
            overflow-y: auto;
            padding: 4px;
            padding-right: 8px;
            border-radius: 12px;
        }

        .album-grid-wrapper::-webkit-scrollbar { width: 6px; }
        .album-grid-wrapper::-webkit-scrollbar-track { background: #f9e8ee; border-radius: 6px; }
        .album-grid-wrapper::-webkit-scrollbar-thumb { background: #ffb3d1; border-radius: 6px; }
        .album-grid-wrapper::-webkit-scrollbar-thumb:hover { background: #ff6b9d; }

        .album-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 0; /* Margin handled by wrapper */
        }

        @media (min-width: 768px) {
            .album-grid {
                grid-template-columns: repeat(4, 1fr);
                column-gap: 18px;
                row-gap: 22px;
            }
            .album-grid-wrapper {
                max-height: 70vh;
            }
        }

        @media (min-width: 1024px) {
            .album-grid {
                grid-template-columns: repeat(4, 1fr);
                column-gap: 20px;
                row-gap: 24px;
                max-width: 1000px;
                margin: 0 auto;
            }
            .album-grid-wrapper {
                max-height: 550px;
            }
        }

        /* Folder/Filter Tabs */
        .album-filters {
            display: flex;
            gap: 10px;
            margin-top: 18px;
            overflow-x: auto;
            padding-bottom: 8px;
            scrollbar-width: thin;
            scrollbar-color: #ffb3d1 transparent;
        }

        .album-filters::-webkit-scrollbar { height: 4px; }
        .album-filters::-webkit-scrollbar-thumb { background: #ffb3d1; border-radius: 4px; }

        .filter-tab {
            padding: 8px 18px;
            border: 2px solid #f0d0dd;
            border-radius: 25px;
            background: white;
            color: #c06c84;
            font-size: 0.9em;
            font-family: 'Georgia', serif;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .filter-tab:hover {
            border-color: #ff6b9d;
            background: #fff0f5;
        }

        .filter-tab.active {
            background: linear-gradient(135deg, #ff6b9d, #c06c84);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .filter-tab-add {
            padding: 8px 14px;
            border: 2px dashed #e0c0cc;
            border-radius: 25px;
            background: transparent;
            color: #c06c84;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
            line-height: 1;
        }

        .filter-tab-add:hover {
            border-color: #ff6b9d;
            background: #fff0f5;
            transform: scale(1.1);
        }

        /* Folder context menu */
        .folder-ctx-menu {
            position: fixed;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.18);
            z-index: 100001;
            overflow: hidden;
            min-width: 160px;
            animation: fadeIn 0.15s ease;
        }

        .folder-ctx-item {
            padding: 12px 18px;
            cursor: pointer;
            font-family: 'Georgia', serif;
            font-size: 0.95em;
            color: #555;
            transition: background 0.15s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .folder-ctx-item:hover { background: #fff0f5; color: #c06c84; }
        .folder-ctx-item.danger { color: #ff4757; }
        .folder-ctx-item.danger:hover { background: #fff0f0; }

        /* Custom Modal */
        .custom-modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 200000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }

        .custom-modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s ease;
            font-family: 'Georgia', serif;
        }

        .custom-modal h3 {
            margin: 0 0 8px 0;
            color: #c06c84;
            font-size: 1.2em;
        }

        .custom-modal p {
            margin: 0 0 18px 0;
            color: #888;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .custom-modal input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #f0d0dd;
            border-radius: 12px;
            font-size: 1em;
            font-family: 'Georgia', serif;
            color: #555;
            outline: none;
            transition: border-color 0.3s;
            margin-bottom: 18px;
            box-sizing: border-box;
        }

        .custom-modal input:focus { border-color: #ff6b9d; }

        .custom-modal-btns {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 10px 22px;
            border-radius: 12px;
            border: none;
            font-size: 0.95em;
            cursor: pointer;
            font-family: 'Georgia', serif;
            transition: all 0.3s;
        }

        .modal-btn.cancel {
            background: #f0f0f0;
            color: #888;
        }

        .modal-btn.cancel:hover { background: #e0e0e0; }

        .modal-btn.primary {
            background: linear-gradient(135deg, #ff6b9d, #c06c84);
            color: white;
        }

        .modal-btn.primary:hover { transform: scale(1.03); box-shadow: 0 4px 15px rgba(255,107,157,0.4); }

        .modal-btn.danger {
            background: #ff4757;
            color: white;
        }

        .modal-btn.danger:hover { transform: scale(1.03); box-shadow: 0 4px 15px rgba(255,71,87,0.4); }

        .album-item {
            position: relative;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            aspect-ratio: 1;
            background: #f8f0f4;
        }

        .album-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 157, 0.25);
        }

        .album-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .album-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.5) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            padding: 12px;
            pointer-events: none;
        }

        .album-item:hover .album-item-overlay {
            opacity: 1;
            pointer-events: auto;
        }

        /* Favorite heart on photo */
        .album-fav-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.35);
            border: none;
            border-radius: 50%;
            width: 34px;
            height: 34px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
            z-index: 2;
        }

        .album-fav-btn:hover { transform: scale(1.2); }
        .album-fav-btn.faved { background: rgba(255, 71, 107, 0.85); }

        /* Caption badge on photo */
        .album-caption-badge {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 8px 12px;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            font-size: 0.8em;
            font-family: 'Georgia', serif;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            pointer-events: none;
        }

        .album-delete-btn {
            background: rgba(255, 71, 87, 0.85);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 10px;
            right: 10px;
            backdrop-filter: blur(4px);
        }

        .album-delete-btn:hover {
            background: rgba(255, 71, 87, 1);
            transform: scale(1.15);
        }

        .album-counter {
            color: #999;
            font-size: 0.9em;
            text-align: center;
            margin-top: 15px;
            font-style: italic;
        }

        /* Enhanced Lightbox */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            z-index: 100000;
            animation: fadeIn 0.3s ease;
            flex-direction: column;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            flex-shrink: 0;
        }

        .lightbox-nav-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            font-size: 28px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .lightbox-nav-btn:hover { background: rgba(255,255,255,0.2); }

        .lightbox-body {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            padding: 0 20px;
        }

        .lightbox-body img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            object-fit: contain;
        }

        .lightbox-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            font-size: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }

        .lightbox-arrow:hover { background: rgba(255,255,255,0.25); }
        .lightbox-arrow.left { left: 15px; }
        .lightbox-arrow.right { right: 15px; }

        .lightbox-details {
            flex-shrink: 0;
            padding: 15px 25px 25px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 30vh;
            overflow-y: auto;
        }

        .lightbox-actions {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .lb-action-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1.5px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Georgia', serif;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .lb-action-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); }
        .lb-action-btn.active-fav { background: rgba(255, 71, 107, 0.5); border-color: #ff476b; }

        .lb-folder-select {
            padding: 8px 14px;
            border-radius: 20px;
            border: 1.5px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 0.9em;
            font-family: 'Georgia', serif;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
        }

        .lb-folder-select option { background: #333; color: white; }

        /* Facebook-style comment section */
        .lb-comments-section {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 10px;
            margin-top: 4px;
        }

        .lb-comments-label {
            color: rgba(255,255,255,0.5);
            font-size: 0.8em;
            font-family: 'Georgia', serif;
            margin-bottom: 8px;
        }

        .lb-comments-list {
            max-height: 120px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 10px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.2) transparent;
        }

        .lb-comments-list::-webkit-scrollbar { width: 4px; }
        .lb-comments-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }

        .lb-comment {
            background: rgba(255,255,255,0.08);
            border-radius: 14px;
            padding: 10px 14px;
            position: relative;
            animation: fadeIn 0.2s ease;
        }

        .lb-comment-text {
            color: white;
            font-size: 0.9em;
            font-family: 'Georgia', serif;
            line-height: 1.4;
            word-wrap: break-word;
        }

        .lb-comment-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 4px;
        }

        .lb-comment-time {
            color: rgba(255,255,255,0.35);
            font-size: 0.75em;
            font-family: 'Georgia', serif;
        }

        .lb-comment-del {
            background: none;
            border: none;
            color: rgba(255,255,255,0.3);
            font-size: 0.75em;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .lb-comment-del:hover { color: #ff4757; background: rgba(255,71,87,0.15); }

        .lb-comment-input-area {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .lb-comment-input {
            flex: 1;
            padding: 10px 16px;
            border-radius: 20px;
            border: 1.5px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.06);
            color: white;
            font-size: 0.9em;
            font-family: 'Georgia', serif;
            outline: none;
            transition: border-color 0.3s;
        }

        .lb-comment-input::placeholder { color: rgba(255,255,255,0.35); }
        .lb-comment-input:focus { border-color: #ff6b9d; }

        .lb-post-btn {
            padding: 10px 16px;
            border-radius: 20px;
            border: none;
            background: linear-gradient(135deg, #ff6b9d, #c06c84);
            color: white;
            font-size: 0.85em;
            cursor: pointer;
            font-family: 'Georgia', serif;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .lb-post-btn:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(255,107,157,0.4); }

        .lb-no-comments {
            color: rgba(255,255,255,0.3);
            font-size: 0.85em;
            font-style: italic;
            font-family: 'Georgia', serif;
            text-align: center;
            padding: 8px;
        }

        .lightbox-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .lightbox-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .album-empty {
            text-align: center;
            padding: 30px;
            color: #bbb;
            font-style: italic;
            font-size: 1.05em;
        }

        .album-empty span {
            display: block;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        /* Upload Progress */
        .upload-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 99998;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .upload-overlay.active {
            display: flex;
        }

        .upload-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 179, 209, 0.2);
            border-top: 4px solid #ff6b9d;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .upload-status-text {
            color: white;
            font-size: 1.2em;
            font-family: 'Georgia', serif;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .header {
                padding: 40px 20px;
            }

            h1 {
                font-size: 2em;
            }

            .message {
                font-size: 1.05em;
            }

            .content-section {
                padding: 30px 20px;
            }

            .photo-gallery {
                grid-template-columns: 1fr;
            }

            .music-player {
                bottom: 20px;
                right: 20px;
                padding: 15px;
                flex-direction: column;
                border-radius: 20px;
            }

            .music-info {
                display: none;
            }

            .volume-control {
                flex-direction: column;
                gap: 5px;
            }

            input[type="range"] {
                width: 60px;
            }

            .countdown-container {
                gap: 10px;
            }

            .countdown-item {
                padding: 15px 18px;
            }

            .countdown-number {
                font-size: 2em;
            }

            .countdown-label {
                font-size: 0.85em;
            }

            .flowers {
                transform: scale(0.6);
                min-height: 50vh;
            }

            .bouquet-message-final {
                font-size: 1.5em;
                padding: 0 20px;
            }

            .album-section {
                padding: 30px 20px;
            }

            .album-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }

            .password-box {
                padding: 40px 28px;
            }
        }
    </style>
</head>
<body>
    <!-- PASSWORD GATE -->
    <div class="password-gate" id="passwordGate">
        <div class="password-box">
            <span class="password-lock-icon">🔐</span>
            <h2>This is Private</h2>
            <p>Enter the password to continue</p>
            <div class="password-input-wrapper">
                <input type="password" class="password-input" id="passwordInput" placeholder="Enter password..." autocomplete="off">
                <button class="toggle-password-btn" id="togglePasswordBtn" onclick="togglePasswordVisibility()">👁️</button>
            </div>
            <button class="password-submit-btn" id="passwordSubmitBtn" onclick="checkPassword()">Unlock 💕</button>
            <div class="password-error" id="passwordError">Wrong password, try again 💔</div>
        </div>
    </div>

    <!-- LOADING SCREEN -->
    <div class="loading-screen" id="loadingScreen" style="display: none;">
        <div class="loading-heart">💖</div>
        <div class="loading-text">Loading Our Memories</div>
        <div class="loading-dots">
            <span class="dot">.</span>
            <span class="dot">.</span>
            <span class="dot">.</span>
        </div>
    </div>

    <!-- Welcome Overlay -->
    <div class="welcome-overlay" id="welcomeOverlay" style="display: none;">
        <div class="welcome-box">
            <div class="heart" style="font-size: 60px;">💕</div>
            <h2>Welcome LOVEE 💖</h2>
            <p>I made something special for you.<br></p>
            <button class="start-btn" onclick="startExperience()">Start 💖</button>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="A Song for Heaven.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Upload Photos Button (fixed, above music player) -->
    <div class="album-upload-area" id="albumUploadArea" onclick="document.getElementById('albumFileInput').click()">
        <div class="upload-icon-btn">📷</div>
        <span class="upload-label">Upload Photos</span>
    </div>

    <!-- Music Player Controls -->
    <div class="music-player" id="musicPlayer" style="display: none;">
        <button class="play-pause-btn" id="playPauseBtn" onclick="toggleMusic()">
            <span id="playIcon">▶️</span>
        </button>
        <div class="music-info">
            <div class="music-title">Our Song 🎵</div>
            <div class="music-status" id="musicStatus">Playing...</div>
        </div>
        <div class="volume-control">
            <span class="volume-icon">🔊</span>
            <input type="range" id="volumeSlider" min="0" max="100" value="50" onchange="changeVolume()">
        </div>
    </div>

    <div class="floating-hearts" id="hearts"></div>
    <div class="night"></div>

    <div class="container">
        <div class="header scroll-reveal">
            <div class="heart">💕</div>
            <h1>Happy Monthsary!</h1>
            <div class="subtitle">MAHALLL</div>
            <div class="date">October 18, 2025</div>
        </div>

        <!-- COUNTDOWN TIMER -->
        <div class="countdown-section scroll-reveal">
            <div class="countdown-title">We've Been Together For...</div>
            <div class="countdown-container">
                <div class="countdown-item">
                    <span class="countdown-number" id="months">20</span>
                    <span class="countdown-label">Months</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="days">0</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="hours">0</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="minutes">0</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="countdown-number" id="seconds">0</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
        </div>

        <div class="content-section scroll-reveal">
            <div class="section-title">My Love Letter to You</div>

            <div class="message scroll-reveal">
                My dearest love, I can't believe it's been 20 months since you came into my life and changed everything. Twenty months of laughter, tears, growth, and unconditional love. Twenty months of learning what it truly means to be with someone who makes every single day worth living.
            </div>

            <div class="message scroll-reveal">
                When I think about us, I think about all the little moments that make my heart full. The way you laugh at my terrible jokes, the way you look at me when you think I'm not watching, the sound of your voice when you call my name. Every single detail about you is etched into my heart, and I wouldn't change a single thing.
            </div>

            <div class="message-center scroll-reveal">
                "We're not perfect, but we're perfect for each other"
            </div>

            <div class="message scroll-reveal">
                I know we're not always easy. <span class="emphasis">We fight, we argue, we frustrate each other</span>—sometimes over the silliest things. There are moments when we both want to walk away, when the words hurt and the silence feels too heavy. But here's what I've learned about us: <span class="emphasis">we always find our way back to each other</span>. Every single time.
            </div>

            <div class="message scroll-reveal">
                That's what makes us special. We don't run away when things get hard. We don't give up when we're angry. Instead, we talk, we listen, we understand. We put our pride aside because what we have is so much bigger than any argument. You've taught me that real love isn't about never fighting—it's about always choosing each other, even when it's difficult. <span class="emphasis">Especially when it's difficult</span>.
            </div>

            <div class="message scroll-reveal">
                Every time we fix what's broken between us, we come back stronger. Every misunderstanding becomes a lesson. Every tear becomes a testament to how much we care. You've shown me that love is patient, love is forgiving, and love is worth fighting for. Our love is worth fighting for.
            </div>
        </div>

        <div class="content-section scroll-reveal">
            <div class="section-title">Our Beautiful Memories</div>
            <div class="photo-gallery">
                <div class="photo-frame scroll-reveal-left">
                    <img src="started.jpg">
                    <div class="photo-caption">Where it all began ❤️</div>
                </div>

                <div class="photo-frame scroll-reveal-right">
                    <img src="memries.jpg">
                    <div class="photo-caption">Making memories with you 💕</div>
                </div>

                <div class="photo-frame scroll-reveal-left">
                    <img src="fav.jpg">
                    <div class="photo-caption">Our favorite adventure 🌟</div>
                </div>

                <div class="photo-frame scroll-reveal-right">
                    <img src="mmhap.jpg">
                    <div class="photo-caption">You make me so happy 😊</div>
                </div>

                <div class="photo-frame scroll-reveal-left">
                    <img src="stillu.jpg">
                    <div class="photo-caption">Still falling for you 💖</div>
                </div>

                <div class="photo-frame scroll-reveal-right">
                    <img src="formy.jpg">
                    <div class="photo-caption">Forever my favorite person 💑</div>
                </div>
            </div>
        </div>

        <div class="content-section scroll-reveal">
            <div class="section-title">What You Mean to Me</div>

            <div class="message scroll-reveal">
                Baby, you are my safe place in a chaotic world. When everything feels overwhelming, when life gets too heavy, I know I can come to you. You're my best friend, my partner, my confidant, my everything. You see me at my worst and still choose to love me at my best. That kind of love is rare, and I cherish it every single day.
            </div>

            <div class="message scroll-reveal">
                Thank you for being patient with me. Thank you for understanding my flaws and loving me anyway. Thank you for every time you've forgiven me, every time you've held my hand through the hard times, every time you've smiled at me and made everything okay again. Thank you for showing me what real, honest, beautiful love looks like.
            </div>

            <div class="message scroll-reveal">
                These 20 months have been the best months of my life, and I can't wait for all the months and years to come. I want to experience everything with you—the good days, the challenging days, the ordinary days, and the extraordinary ones. I want to keep growing with you, learning with you, and building a life with you.
            </div>

            <div class="message-center scroll-reveal">
                "In a sea of people, my eyes will always search for you"
            </div>

            <div class="message scroll-reveal">
                You are my person. You are the one I want to call when something exciting happens. You are the one I want to hug when I'm sad. You are the one I want beside me through every moment. I love you more than words could ever express, and I promise to keep showing you every single day just how much you mean to me.
            </div>

            <div class="message scroll-reveal">
                Here's to 20 months down and a lifetime to go. Here's to all the fights we'll work through, all the laughs we'll share, all the memories we'll create, and all the love we'll continue to build together. I'm so grateful for you, for us, and for this beautiful journey we're on.
            </div>

            <div class="message scroll-reveal">
                I love you endlessly, completely, and unconditionally. Thank you for being mine.
            </div>

            <button class="button" onclick="revealMessage()">Click for a Special Message 💕</button>

            <div class="hidden-message" id="hiddenMessage">
                <h2 style="color: #c06c84; margin-bottom: 20px; text-align: center;">💕 Forever Yours 💕</h2>
                <p style="font-size: 1.2em; color: #555; text-align: center; line-height: 1.8;">
                    To my beautiful girlfriend on our 20-month anniversary:<br><br>
                    You are my today and all of my tomorrows. Through every argument, every makeup, 
                    every laugh, and every tear—my love for you only grows stronger.<br><br>
                    <span style="color: #ff6b9d; font-weight: bold; font-size: 1.3em;">
                    I choose you. Today, tomorrow, and forever. ❤️
                    </span><br><br>
                    Happy 20 Months, my love. Here's to infinity more.
                </p>
            </div>
        </div>

        <!-- PHOTO ALBUM SECTION -->
        <div class="album-section scroll-reveal">
            <div class="section-title">Our Photo Album 📸</div>
            <input type="file" class="album-upload-input" id="albumFileInput" accept="image/*" multiple>
            <div class="album-filters" id="albumFilters"></div>
            <div class="album-grid-wrapper">
                <div class="album-grid" id="albumGrid"></div>
            </div>
            <div class="album-counter" id="albumCounter"></div>
            <div class="album-empty" id="albumEmpty">
                <span>📷</span>
                No photos yet — start adding your memories!
            </div>
        </div>

        <!-- UPLOAD PROGRESS OVERLAY -->
        <div class="upload-overlay" id="uploadOverlay">
            <div class="upload-spinner"></div>
            <div class="upload-status-text" id="uploadStatusText">Uploading your memories... 💕</div>
        </div>

        <div class="footer scroll-reveal">
            <div class="heart" style="font-size: 50px; animation-duration: 1s;">💖</div>
            <div style="margin-top: 20px; font-size: 1.3em;">Forever & Always</div>
            <div style="margin-top: 10px; font-size: 1em;">ILOVEYOUUUUUU</div>
        </div>
    </div>

    <!-- BLOSSOMING FLOWERS FROM REFERENCE -->
    <div style="padding-bottom: 35px;">

    </div>

    <div class="flowers not-loaded">
        <div class="flower flower--1">
            <div class="flower__leafs flower__leafs--1">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__white-circle"></div>

                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>
            <div class="flower__line">
                <div class="flower__line__leaf flower__line__leaf--1"></div>
                <div class="flower__line__leaf flower__line__leaf--2"></div>
                <div class="flower__line__leaf flower__line__leaf--3"></div>
                <div class="flower__line__leaf flower__line__leaf--4"></div>
                <div class="flower__line__leaf flower__line__leaf--5"></div>
                <div class="flower__line__leaf flower__line__leaf--6"></div>
            </div>
        </div>

        <div class="flower flower--2">
            <div class="flower__leafs flower__leafs--2">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__white-circle"></div>

                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>
            <div class="flower__line">
                <div class="flower__line__leaf flower__line__leaf--1"></div>
                <div class="flower__line__leaf flower__line__leaf--2"></div>
                <div class="flower__line__leaf flower__line__leaf--3"></div>
                <div class="flower__line__leaf flower__line__leaf--4"></div>
            </div>
        </div>

        <div class="flower flower--3">
            <div class="flower__leafs flower__leafs--3">
                <div class="flower__leaf flower__leaf--1"></div>
                <div class="flower__leaf flower__leaf--2"></div>
                <div class="flower__leaf flower__leaf--3"></div>
                <div class="flower__leaf flower__leaf--4"></div>
                <div class="flower__white-circle"></div>

                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
                <div class="flower__light flower__light--3"></div>
                <div class="flower__light flower__light--4"></div>
                <div class="flower__light flower__light--5"></div>
                <div class="flower__light flower__light--6"></div>
                <div class="flower__light flower__light--7"></div>
                <div class="flower__light flower__light--8"></div>
            </div>
            <div class="flower__line">
                <div class="flower__line__leaf flower__line__leaf--1"></div>
                <div class="flower__line__leaf flower__line__leaf--2"></div>
                <div class="flower__line__leaf flower__line__leaf--3"></div>
                <div class="flower__line__leaf flower__line__leaf--4"></div>
            </div>
        </div>

        <div class="grow-ans" style="--d:1.2s">
            <div class="flower__g-long">
                <div class="flower__g-long__top"></div>
                <div class="flower__g-long__bottom"></div>
            </div>
        </div>

        

       

        <div class="grow-ans" style="--d:2.4s">
            <div class="flower__g-right flower__g-right--1">
                <div class="leaf"></div>
            </div>
        </div>

        <div class="grow-ans" style="--d:2.8s">
            <div class="flower__g-right flower__g-right--2">
                <div class="leaf"></div>
            </div>
        </div>

        <div class="grow-ans" style="--d:2.8s">
            <div class="flower__g-front">
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--1">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--2">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--3">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--4">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--5">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--6">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--7">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--8">
                    <div class="flower__g-front__leaf"></div>
                </div>
                <div class="flower__g-front__line"></div>
            </div>
        </div>

        <div class="grow-ans" style="--d:3.2s">
            <div class="flower__g-fr">
                <div class="leaf"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--1"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--2"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--3"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--4"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--5"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--6"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--7"></div>
                <div class="flower__g-fr__leaf flower__g-fr__leaf--8"></div>
            </div>
        </div>

        
    </div>


    <script>
        // ===== LOADING SCREEN =====
        // (Loading is now triggered after password gate unlock)

        // ===== FLOWER ANIMATION TRIGGER WHEN FOOTER IS VISIBLE =====
        let flowersAnimated = false;

        const footerObserver = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting && !flowersAnimated) {
                    const flowersDiv = document.querySelector('.flowers');
                    if (flowersDiv) {
                        flowersDiv.classList.remove("not-loaded");
                        console.log("Flowers animation started!");
                    }
                    flowersAnimated = true;
                }
            });
        }, {
            threshold: 0.2,
            rootMargin: '0px'
        });

        // Watch the footer to trigger flower animations
        window.addEventListener('load', function() {
            const footer = document.querySelector('.footer.scroll-reveal');
            if (footer) {
                footerObserver.observe(footer);
                console.log("Footer observer set up");
            }
        });

        // ===== COUNTDOWN TIMER WITH SECONDS =====
        const startDate = new Date('2024-02-18T00:00:00');

        function updateCountdown() {
            const now = new Date();
            const diff = now - startDate;

            const totalDays = Math.floor(diff / (1000 * 60 * 60 * 24));
            const months = Math.floor(totalDays / 30);
            const days = totalDays % 30;
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('months').textContent = months;
            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

        // ===== SCROLL ANIMATIONS =====
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('revealed');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right').forEach(el => {
            observer.observe(el);
        });

        // ===== MUSIC PLAYER =====
        const bgMusic = document.getElementById('bgMusic');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const musicStatus = document.getElementById('musicStatus');
        const volumeSlider = document.getElementById('volumeSlider');
        const musicPlayer = document.getElementById('musicPlayer');

        bgMusic.volume = 0.5;

        function startExperience() {
            document.getElementById('welcomeOverlay').style.display = 'none';
            musicPlayer.style.display = 'flex';

            bgMusic.play().then(() => {
                playIcon.textContent = '⏸️';
                musicStatus.textContent = 'Playing...';
            }).catch(error => {
                console.log('Autoplay prevented:', error);
                playIcon.textContent = '▶️';
                musicStatus.textContent = 'Click to play';
            });
        }

        function toggleMusic() {
            if (bgMusic.paused) {
                bgMusic.play();
                playIcon.textContent = '⏸️';
                musicStatus.textContent = 'Playing...';
            } else {
                bgMusic.pause();
                playIcon.textContent = '▶️';
                musicStatus.textContent = 'Paused';
            }
        }

        function changeVolume() {
            bgMusic.volume = volumeSlider.value / 100;
        }

        // ===== FLOATING HEARTS =====
        function createHeart() {
            const hearts = ['💕', '💖', '💗', '💝', '❤️'];
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
            heart.style.animationDelay = Math.random() * 5 + 's';
            document.getElementById('hearts').appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 15000);
        }

        setInterval(createHeart, 1500);

        function revealMessage() {
            const message = document.getElementById('hiddenMessage');
            message.style.display = 'block';
            message.scrollIntoView({ behavior: 'smooth', block: 'center' });

            for (let i = 0; i < 30; i++) {
                setTimeout(createHeart, i * 80);
            }
        }

        for (let i = 0; i < 8; i++) {
            setTimeout(createHeart, i * 300);
        }

        // ===== PASSWORD GATE =====
        const CORRECT_PASSWORD = 'kench021824';

        // Listen for Enter key on password input
        document.getElementById('passwordInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        function checkPassword() {
            const input = document.getElementById('passwordInput');
            const error = document.getElementById('passwordError');
            const gate = document.getElementById('passwordGate');

            if (input.value === CORRECT_PASSWORD) {
                // Correct password — unlock
                gate.classList.add('hidden');
                // Show loading screen
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.style.display = 'flex';
                setTimeout(function() {
                    loadingScreen.classList.add('hidden');
                    setTimeout(function() {
                        document.getElementById('welcomeOverlay').style.display = 'flex';
                    }, 800);
                }, 2500);
            } else {
                // Wrong password
                error.classList.add('visible');
                input.value = '';
                input.focus();
                setTimeout(() => {
                    error.classList.remove('visible');
                }, 2500);
            }
        }

        function togglePasswordVisibility() {
            const input = document.getElementById('passwordInput');
            const btn = document.getElementById('togglePasswordBtn');
            if (input.type === 'password') {
                input.type = 'text';
                btn.textContent = '🙈';
            } else {
                input.type = 'password';
                btn.textContent = '👁️';
            }
        }

        // Create sparkles for password gate
        (function createGateSparkles() {
            const gate = document.getElementById('passwordGate');
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'gate-sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 6 + 's';
                sparkle.style.animationDuration = (4 + Math.random() * 4) + 's';
                gate.appendChild(sparkle);
            }
        })();

        // Override the default loading behavior (since password gate handles it now)
        window.removeEventListener('load', function(){});

        // ===== PHOTO ALBUM (ImgBB + npoint.io Shared Online Album) =====
        const IMGBB_API_KEY = 'e203a26c6e6ae9318483e7dce63e9ab7';
        const NPOINT_URL = 'https://api.npoint.io/0f986321bacd151bd8f2';

        const albumGrid = document.getElementById('albumGrid');
        const albumFileInput = document.getElementById('albumFileInput');
        const albumUploadArea = document.getElementById('albumUploadArea');
        const albumCounter = document.getElementById('albumCounter');
        const albumEmpty = document.getElementById('albumEmpty');
        const albumFilters = document.getElementById('albumFilters');
        const uploadOverlay = document.getElementById('uploadOverlay');
        const uploadStatusText = document.getElementById('uploadStatusText');

        let albumPhotos = [];
        let activeFilter = 'All';
        let currentLightboxIndex = -1;
        const DEFAULT_FOLDERS = ['All', '❤️ Favorites'];

        // --- Sync with npoint.io (shared online storage) ---
        async function loadAlbumFromCloud() {
            try {
                // Add timestamp to prevent caching
                const res = await fetch(NPOINT_URL + '?t=' + Date.now(), { cache: "no-store" });
                const data = await res.json();
                albumPhotos = Array.isArray(data) ? data : (data.photos || []);
                // Migrate old format: if photo is just a string URL, convert to object
                albumPhotos = albumPhotos.map(p => {
                    if (typeof p === 'string') return { url: p, comments: [], folder: 'All', favorite: false, date: new Date().toISOString() };
                    // Migrate old caption to comments
                    if (p.caption && (!p.comments || p.comments.length === 0)) {
                        p.comments = [{ text: p.caption, time: p.date || new Date().toISOString() }];
                        delete p.caption;
                    }
                    p.comments = p.comments || [];
                    p.folder = p.folder || 'All';
                    p.favorite = p.favorite || false;
                    p.date = p.date || new Date().toISOString();
                    return p;
                });
                renderFilters();
                renderAlbum();
            } catch (err) {
                console.warn('Could not load album from cloud, using local cache.', err);
                albumPhotos = JSON.parse(localStorage.getItem('motmot_album_cloud') || '[]');
                renderFilters();
                renderAlbum();
            }
        }

        async function saveAlbumToCloud() {
            try {
                // 1. Fetch the latest data from cloud first
                const res = await fetch(NPOINT_URL + '?t=' + Date.now(), { cache: "no-store" });
                let cloudPhotos = [];
                if (res.ok) {
                    const data = await res.json();
                    cloudPhotos = Array.isArray(data) ? data : (data.photos || []);
                }

                // 2. Merge: use URL as unique key
                const mergedMap = new Map();
                // Add cloud photos first
                cloudPhotos.forEach(p => { if (p.url) mergedMap.set(p.url, p); });
                // Local photos override cloud (they have latest edits like favorites, comments, folder)
                albumPhotos.forEach(p => { if (p.url) mergedMap.set(p.url, p); });

                // 3. Update local array with merged result
                albumPhotos = Array.from(mergedMap.values());
                localStorage.setItem('motmot_album_cloud', JSON.stringify(albumPhotos));

                // 4. Save merged data to cloud
                await fetch(NPOINT_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(albumPhotos)
                });

                // 5. Re-render with merged data
                renderFilters();
                renderAlbum();
            } catch (err) {
                console.error('Failed to sync album to cloud:', err);
                // Still save locally as fallback
                localStorage.setItem('motmot_album_cloud', JSON.stringify(albumPhotos));
            }
        }

        // --- Upload progress ---
        function showUploadProgress(msg) {
            uploadOverlay.classList.add('active');
            uploadStatusText.textContent = msg;
        }

        function hideUploadProgress() {
            uploadOverlay.classList.remove('active');
        }

        // --- Folders / Filters ---
        let customFolders = JSON.parse(localStorage.getItem('motmot_custom_folders') || '[]');
        // Seed starter folders on first run
        if (!localStorage.getItem('motmot_folders_seeded')) {
            const starters = ['Date Nights', 'Adventures', 'Selfies', 'Us'];
            starters.forEach(f => { if (!customFolders.includes(f)) customFolders.push(f); });
            localStorage.setItem('motmot_custom_folders', JSON.stringify(customFolders));
            localStorage.setItem('motmot_folders_seeded', 'true');
        }

        function getUsedFolders() {
            const all = [...DEFAULT_FOLDERS, ...customFolders];
            // Also include any folder names from photos that aren't in our lists
            albumPhotos.forEach(p => {
                if (p.folder && !all.includes(p.folder)) all.push(p.folder);
            });
            return all;
        }

        function saveCustomFolders() {
            localStorage.setItem('motmot_custom_folders', JSON.stringify(customFolders));
        }

        // --- Custom Modal System ---
        function showModal({ title, message, inputVal, placeholder, confirmText, confirmClass, showInput }) {
            return new Promise(resolve => {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal">
                        <h3>${title}</h3>
                        <p>${message}</p>
                        ${showInput ? `<input type="text" id="modalInput" value="${inputVal || ''}" placeholder="${placeholder || ''}" autocomplete="off">` : ''}
                        <div class="custom-modal-btns">
                            <button class="modal-btn cancel" id="modalCancel">Cancel</button>
                            <button class="modal-btn ${confirmClass || 'primary'}" id="modalConfirm">${confirmText || 'OK'}</button>
                        </div>
                    </div>
                `;
                document.body.appendChild(overlay);

                const input = overlay.querySelector('#modalInput');
                if (input) { input.focus(); input.select(); }

                const close = (result) => { overlay.remove(); resolve(result); };

                overlay.querySelector('#modalCancel').onclick = () => close(null);
                overlay.querySelector('#modalConfirm').onclick = () => {
                    if (showInput) close(input.value.trim());
                    else close(true);
                };
                if (input) input.onkeydown = (e) => { if (e.key === 'Enter') close(input.value.trim()); };
                overlay.onclick = (e) => { if (e.target === overlay) close(null); };
            });
        }

        async function addNewFolder() {
            const name = await showModal({
                title: '📁 New Folder',
                message: 'Enter a name for the new folder:',
                showInput: true,
                placeholder: 'e.g. Date Nights',
                confirmText: 'Create 💕'
            });
            if (!name) return;
            if (getUsedFolders().includes(name)) {
                await showModal({ title: '⚠️ Oops', message: `A folder named "${name}" already exists.`, confirmText: 'OK', showInput: false });
                return;
            }
            customFolders.push(name);
            saveCustomFolders();
            activeFilter = name;
            renderFilters();
            renderAlbum();
        }

        async function renameFolder(oldName) {
            closeFolderContextMenu();
            const newName = await showModal({
                title: '✏️ Rename Folder',
                message: `Rename "${oldName}" to:`,
                showInput: true,
                inputVal: oldName,
                confirmText: 'Rename 💕'
            });
            if (!newName || newName === oldName) return;
            if (getUsedFolders().includes(newName)) {
                await showModal({ title: '⚠️ Oops', message: `A folder named "${newName}" already exists.`, confirmText: 'OK', showInput: false });
                return;
            }
            const idx = customFolders.indexOf(oldName);
            if (idx !== -1) customFolders[idx] = newName;
            albumPhotos.forEach(p => { if (p.folder === oldName) p.folder = newName; });
            if (activeFilter === oldName) activeFilter = newName;
            saveCustomFolders();
            renderFilters();
            renderAlbum();
            saveAlbumToCloud();
        }

        async function deleteFolder(folderName) {
            closeFolderContextMenu();
            const confirmed = await showModal({
                title: '🗑️ Delete Folder',
                message: `Delete "${folderName}"? All photos in this folder will be moved to "All".`,
                showInput: false,
                confirmText: 'Delete',
                confirmClass: 'danger'
            });
            if (!confirmed) return;
            albumPhotos.forEach(p => { if (p.folder === folderName) p.folder = 'All'; });
            customFolders = customFolders.filter(f => f !== folderName);
            if (activeFilter === folderName) activeFilter = 'All';
            saveCustomFolders();
            renderFilters();
            renderAlbum();
            saveAlbumToCloud();
        }

        function showFolderContextMenu(e, folderName) {
            e.preventDefault();
            e.stopPropagation();
            closeFolderContextMenu();

            // Create invisible backdrop to catch outside clicks
            const backdrop = document.createElement('div');
            backdrop.id = 'folderCtxBackdrop';
            backdrop.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;z-index:100000;';
            backdrop.onclick = () => closeFolderContextMenu();
            document.body.appendChild(backdrop);

            const menu = document.createElement('div');
            menu.className = 'folder-ctx-menu';
            menu.id = 'folderCtxMenu';

            const renameDiv = document.createElement('div');
            renameDiv.className = 'folder-ctx-item';
            renameDiv.textContent = '✏️ Rename';
            renameDiv.onclick = (ev) => { ev.stopPropagation(); closeFolderContextMenu(); renameFolder(folderName); };

            const deleteDiv = document.createElement('div');
            deleteDiv.className = 'folder-ctx-item danger';
            deleteDiv.textContent = '🗑️ Delete';
            deleteDiv.onclick = (ev) => { ev.stopPropagation(); closeFolderContextMenu(); deleteFolder(folderName); };

            menu.appendChild(renameDiv);
            menu.appendChild(deleteDiv);

            // Position menu
            const x = e.clientX || (e.touches && e.touches[0] ? e.touches[0].clientX : 100);
            const y = e.clientY || (e.touches && e.touches[0] ? e.touches[0].clientY : 100);
            menu.style.left = Math.min(x, window.innerWidth - 180) + 'px';
            menu.style.top = Math.min(y, window.innerHeight - 120) + 'px';
            document.body.appendChild(menu);
        }

        function closeFolderContextMenu() {
            const m = document.getElementById('folderCtxMenu');
            if (m) m.remove();
            const b = document.getElementById('folderCtxBackdrop');
            if (b) b.remove();
        }

        function renderFilters() {
            const folders = getUsedFolders();
            albumFilters.innerHTML = '';
            folders.forEach(folder => {
                const tab = document.createElement('button');
                tab.className = 'filter-tab' + (activeFilter === folder ? ' active' : '');
                const count = folder === 'All' ? albumPhotos.length :
                              folder === '❤️ Favorites' ? albumPhotos.filter(p => p.favorite).length :
                              albumPhotos.filter(p => p.folder === folder).length;
                tab.textContent = folder + (count > 0 ? ` (${count})` : '');
                tab.onclick = () => { activeFilter = folder; renderFilters(); renderAlbum(); };
                // Right-click + long-press for rename/delete
                const isProtected = ['All', '❤️ Favorites'].includes(folder);
                if (!isProtected) {
                    tab.oncontextmenu = (e) => showFolderContextMenu(e, folder);
                    // Long-press for mobile
                    let pressTimer;
                    tab.addEventListener('touchstart', (e) => {
                        pressTimer = setTimeout(() => {
                            e.preventDefault();
                            showFolderContextMenu(e, folder);
                        }, 600);
                    }, { passive: false });
                    tab.addEventListener('touchend', () => clearTimeout(pressTimer));
                    tab.addEventListener('touchmove', () => clearTimeout(pressTimer));
                }
                albumFilters.appendChild(tab);
            });
            // Add "+" button
            const addBtn = document.createElement('button');
            addBtn.className = 'filter-tab-add';
            addBtn.textContent = '+';
            addBtn.title = 'Add new folder';
            addBtn.onclick = addNewFolder;
            albumFilters.appendChild(addBtn);
        }

        function getFilteredPhotos() {
            if (activeFilter === 'All') return albumPhotos;
            if (activeFilter === '❤️ Favorites') return albumPhotos.filter(p => p.favorite);
            return albumPhotos.filter(p => p.folder === activeFilter);
        }

        // --- Render ---
        function renderAlbum() {
            albumGrid.innerHTML = '';
            const filtered = getFilteredPhotos();
            filtered.forEach((photo, filteredIndex) => {
                const realIndex = albumPhotos.indexOf(photo);
                const item = document.createElement('div');
                item.className = 'album-item scroll-reveal revealed';
                const imgUrl = photo.url || photo;
                const isFav = photo.favorite;
                const comments = photo.comments || [];
                const lastComment = comments.length > 0 ? comments[comments.length - 1].text : '';
                item.onclick = () => openLightbox(realIndex);
                item.innerHTML = `
                    <img src="${imgUrl}" alt="Memory ${realIndex + 1}" loading="lazy">
                    <button class="album-fav-btn ${isFav ? 'faved' : ''}" onclick="event.stopPropagation(); toggleFavorite(${realIndex})" title="Favorite">${isFav ? '❤️' : '🤍'}</button>
                    ${lastComment ? `<div class="album-caption-badge">💬 ${lastComment}</div>` : ''}
                    ${comments.length > 1 ? `<div class="album-caption-badge" style="bottom:22px;background:transparent;font-size:0.7em;color:rgba(255,255,255,0.6);">${comments.length} comments</div>` : ''}
                    <div class="album-item-overlay">
                        <button class="album-delete-btn" onclick="event.stopPropagation(); deletePhoto(${realIndex})" title="Remove">✕</button>
                    </div>
                `;
                albumGrid.appendChild(item);
            });

            const total = albumPhotos.length;
            const showing = filtered.length;
            if (activeFilter !== 'All' && total > 0) {
                albumCounter.textContent = `Showing ${showing} of ${total} photos 💕`;
            } else {
                albumCounter.textContent = total > 0 ? `${total} photo${total !== 1 ? 's' : ''} in your album 💕` : '';
            }
            albumEmpty.style.display = filtered.length === 0 ? 'block' : 'none';
        }

        // --- Favorite toggle ---
        async function toggleFavorite(index) {
            albumPhotos[index].favorite = !albumPhotos[index].favorite;
            renderFilters();
            renderAlbum();
            await saveAlbumToCloud();
        }

        // --- Upload to ImgBB ---
        async function uploadToImgBB(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64 = e.target.result.split(',')[1];
                    const formData = new FormData();
                    formData.append('key', IMGBB_API_KEY);
                    formData.append('image', base64);
                    formData.append('name', 'motmot_' + Date.now());

                    fetch('https://api.imgbb.com/1/upload', {
                        method: 'POST',
                        body: formData
                    })
                    .then(res => res.json())
                    .then(data => {
                        if (data.success) {
                            resolve({
                                url: data.data.display_url,
                                thumb: data.data.thumb ? data.data.thumb.url : data.data.display_url,
                                comments: [],
                                folder: activeFilter !== 'All' && activeFilter !== '❤️ Favorites' ? activeFilter : 'All',
                                favorite: false,
                                date: new Date().toISOString()
                            });
                        } else {
                            reject(new Error(data.error ? data.error.message : 'Upload failed'));
                        }
                    })
                    .catch(err => reject(err));
                };
                reader.readAsDataURL(file);
            });
        }

        // --- Add photos ---
        async function addPhotos(files) {
            const imageFiles = Array.from(files).filter(f => f.type.startsWith('image/'));
            if (imageFiles.length === 0) return;

            let uploaded = 0;
            const total = imageFiles.length;

            for (const file of imageFiles) {
                try {
                    uploaded++;
                    showUploadProgress(`Uploading ${uploaded} of ${total}... 💕`);
                    const result = await uploadToImgBB(file);
                    albumPhotos.push(result);
                    renderFilters();
                    renderAlbum();
                } catch (err) {
                    console.error('Upload error:', err);
                    alert('Failed to upload ' + file.name + '. Please try again.');
                }
            }

            showUploadProgress('Saving to cloud... ☁️');
            await saveAlbumToCloud();
            hideUploadProgress();
        }

        // --- Delete photo ---
        async function deletePhoto(index) {
            if (confirm('Remove this photo from the album?')) {
                albumPhotos.splice(index, 1);
                renderFilters();
                renderAlbum();
                await saveAlbumToCloud();
            }
        }

        // --- Enhanced Lightbox ---
        function openLightbox(index) {
            currentLightboxIndex = index;
            updateLightboxView();
            document.getElementById('lightbox').classList.add('active');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            currentLightboxIndex = -1;
        }

        function handleLightboxClick(event) {
            if (event.target === event.currentTarget || event.target.classList.contains('lightbox-body')) {
                closeLightbox();
            }
        }

        function navigateLightbox(direction) {
            if (albumPhotos.length === 0) return;
            currentLightboxIndex = (currentLightboxIndex + direction + albumPhotos.length) % albumPhotos.length;
            updateLightboxView();
        }

        function formatCommentTime(isoStr) {
            const d = new Date(isoStr);
            const now = new Date();
            const diff = now - d;
            if (diff < 60000) return 'Just now';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';
            if (diff < 604800000) return Math.floor(diff / 86400000) + 'd ago';
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function updateLightboxView() {
            const photo = albumPhotos[currentLightboxIndex];
            if (!photo) return;
            const imgUrl = photo.url || photo;
            document.getElementById('lightboxImg').src = imgUrl;
            document.getElementById('lightboxPhotoNum').textContent = `${currentLightboxIndex + 1} / ${albumPhotos.length}`;

            // Update favorite button
            const favBtn = document.getElementById('lbFavBtn');
            favBtn.textContent = photo.favorite ? '❤️ Favorited' : '🤍 Favorite';
            favBtn.className = 'lb-action-btn' + (photo.favorite ? ' active-fav' : '');

            // Update folder select
            const select = document.getElementById('lbFolderSelect');
            const folders = getUsedFolders().filter(f => f !== '❤️ Favorites');
            select.innerHTML = folders.map(f =>
                `<option value="${f}" ${photo.folder === f ? 'selected' : ''}>📁 ${f}</option>`
            ).join('');

            // Render comments
            renderLightboxComments();
        }

        function renderLightboxComments() {
            const photo = albumPhotos[currentLightboxIndex];
            if (!photo) return;
            const comments = photo.comments || [];
            const list = document.getElementById('lbCommentsList');
            if (comments.length === 0) {
                list.innerHTML = '<div class="lb-no-comments">No comments yet — be the first to write one! 💕</div>';
            } else {
                list.innerHTML = comments.map((c, i) => `
                    <div class="lb-comment">
                        <div class="lb-comment-text">${c.text}</div>
                        <div class="lb-comment-meta">
                            <span class="lb-comment-time">${formatCommentTime(c.time)}</span>
                            <button class="lb-comment-del" onclick="deleteComment(${i})">Delete</button>
                        </div>
                    </div>
                `).join('');
                // Scroll to bottom
                list.scrollTop = list.scrollHeight;
            }
        }

        async function postComment() {
            if (currentLightboxIndex < 0) return;
            const input = document.getElementById('lbCommentInput');
            const text = input.value.trim();
            if (!text) return;
            if (!albumPhotos[currentLightboxIndex].comments) {
                albumPhotos[currentLightboxIndex].comments = [];
            }
            albumPhotos[currentLightboxIndex].comments.push({ text, time: new Date().toISOString() });
            input.value = '';
            renderLightboxComments();
            renderAlbum();
            await saveAlbumToCloud();
        }

        async function deleteComment(commentIndex) {
            if (currentLightboxIndex < 0) return;
            if (!confirm('Delete this comment?')) return;
            albumPhotos[currentLightboxIndex].comments.splice(commentIndex, 1);
            renderLightboxComments();
            renderAlbum();
            await saveAlbumToCloud();
        }

        async function toggleLightboxFav() {
            if (currentLightboxIndex < 0) return;
            albumPhotos[currentLightboxIndex].favorite = !albumPhotos[currentLightboxIndex].favorite;
            updateLightboxView();
            renderFilters();
            renderAlbum();
            await saveAlbumToCloud();
        }

        async function changeLightboxFolder(folder) {
            if (currentLightboxIndex < 0) return;
            albumPhotos[currentLightboxIndex].folder = folder;
            renderFilters();
            renderAlbum();
            await saveAlbumToCloud();
        }

        async function deleteLightboxPhoto() {
            if (currentLightboxIndex < 0) return;
            if (confirm('Remove this photo from the album?')) {
                albumPhotos.splice(currentLightboxIndex, 1);
                if (albumPhotos.length === 0) {
                    closeLightbox();
                } else {
                    currentLightboxIndex = Math.min(currentLightboxIndex, albumPhotos.length - 1);
                    updateLightboxView();
                }
                renderFilters();
                renderAlbum();
                await saveAlbumToCloud();
            }
        }

        // Keyboard navigation for lightbox
        document.addEventListener('keydown', function(e) {
            const lightbox = document.getElementById('lightbox');
            if (!lightbox.classList.contains('active')) return;
            // Don't navigate if typing in comment input
            if (document.activeElement && document.activeElement.id === 'lbCommentInput') return;
            if (e.key === 'ArrowLeft') navigateLightbox(-1);
            if (e.key === 'ArrowRight') navigateLightbox(1);
            if (e.key === 'Escape') closeLightbox();
        });

        // --- File input ---
        albumFileInput.addEventListener('change', function() {
            addPhotos(this.files);
            this.value = '';
        });

        // --- Drag & drop ---
        albumUploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('dragover');
        });
        albumUploadArea.addEventListener('dragleave', function() {
            this.classList.remove('dragover');
        });
        albumUploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('dragover');
            addPhotos(e.dataTransfer.files);
        });

        // --- Load album from cloud on page load ---
        loadAlbumFromCloud();

        // --- Auto-sync: poll for new photos every 15 seconds ---
        setInterval(async () => {
            try {
                const res = await fetch(NPOINT_URL + '?t=' + Date.now(), { cache: "no-store" });
                if (!res.ok) return;
                const data = await res.json();
                const cloudPhotos = Array.isArray(data) ? data : (data.photos || []);
                // Only update if photo count changed (new photos added or removed)
                if (cloudPhotos.length !== albumPhotos.length) {
                    // Merge: keep local edits, add new cloud photos
                    const mergedMap = new Map();
                    albumPhotos.forEach(p => { if (p.url) mergedMap.set(p.url, p); });
                    cloudPhotos.forEach(p => { if (p.url && !mergedMap.has(p.url)) mergedMap.set(p.url, p); });
                    albumPhotos = Array.from(mergedMap.values());
                    localStorage.setItem('motmot_album_cloud', JSON.stringify(albumPhotos));
                    renderFilters();
                    renderAlbum();
                }
            } catch (e) { /* silent fail */ }
        }, 15000);
    </script>

    <!-- ENHANCED LIGHTBOX (Facebook-style) -->
    <div class="lightbox" id="lightbox" onclick="handleLightboxClick(event)">
        <div class="lightbox-top">
            <span style="color: rgba(255,255,255,0.6); font-family: Georgia, serif; font-size: 0.9em;" id="lightboxPhotoNum"></span>
            <button class="lightbox-close" onclick="closeLightbox()">✕</button>
        </div>
        <div class="lightbox-body">
            <button class="lightbox-arrow left" onclick="navigateLightbox(-1)">❮</button>
            <img id="lightboxImg" src="" alt="Photo">
            <button class="lightbox-arrow right" onclick="navigateLightbox(1)">❯</button>
        </div>
        <div class="lightbox-details">
            <div class="lightbox-actions">
                <button class="lb-action-btn" id="lbFavBtn" onclick="toggleLightboxFav()">� Favorite</button>
                <select class="lb-folder-select" id="lbFolderSelect" onchange="changeLightboxFolder(this.value)">
                    <option value="All">📁 All</option>
                </select>
                <button class="lb-action-btn" onclick="deleteLightboxPhoto()">🗑️ Delete</button>
            </div>
            <div class="lb-comments-section">
                <div class="lb-comments-label">💬 Notes & Comments</div>
                <div class="lb-comments-list" id="lbCommentsList"></div>
                <div class="lb-comment-input-area">
                    <input class="lb-comment-input" id="lbCommentInput" placeholder="Write a comment..." autocomplete="off" onkeydown="if(event.key==='Enter')postComment()">
                    <button class="lb-post-btn" onclick="postComment()">Post 💕</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
